services:
  server:
    build: .
    restart: unless-stopped
    ports:
      - "${OAUTH_SERVER_PORT:-8080}:8080"
    environment:
      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
      - DISCORD_APPLICATION_ID=${DISCORD_APPLICATION_ID}
      - GITHUB_CLIENT_ID=${GITHUB_CLIENT_ID}
      - GITHUB_CLIENT_SECRET=${GITHUB_CLIENT_SECRET}
      - GITHUB_REDIRECT_URL=${GITHUB_REDIRECT_URL}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY}
      - OAUTH_SERVER_PORT=8080
      - OAUTH_SERVER_HOST=0.0.0.0
      - PUBLIC_URL=${PUBLIC_URL}
      - DATABASE_PATH=/home/botuser/data/bot.db
    volumes:
      - bot-data:/home/botuser/data

volumes:
  bot-data:
